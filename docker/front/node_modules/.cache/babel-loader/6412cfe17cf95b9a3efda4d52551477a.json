{"ast":null,"code":"var _jsxFileName = \"/home/mutovkin/docker_homework/frontend/src/AuthorCreateUpdate.js\";\nimport React, { Component } from 'react';\nimport AuthorManager from './AuthorApi';\nconst authorManager = new AuthorManager();\n\nclass AuthorCreateUpdate extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: null,\n      fname: '',\n      lname: '',\n      author_code: '',\n      addition: ''\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n\n    if (params && params.pk) {\n      authorManager.getAuthor(params.pk).then(a => {\n        this.setState({\n          fname: a.fname,\n          lname: a.lname,\n          author_code: a.author_code,\n          addition: a.addition\n        });\n      });\n    }\n  }\n\n  handleUpdate(pk) {\n    authorManager.updateAuthor({\n      \"pk\": pk,\n      \"fname\": this.state.fname,\n      \"lname\": this.state.lname,\n      \"author_code\": this.state.author_code,\n      \"addition\": this.state.addition\n    }).then(result => {\n      alert(\"Автор отредактирован!\");\n    }).catch(() => {\n      alert(\"Ошибка! Проверь форму!\");\n    });\n  }\n\n  handleCreate() {\n    authorManager.createAuthor({\n      \"fname\": this.state.fname,\n      \"lname\": this.state.lname,\n      \"author_code\": this.state.author_code,\n      \"addition\": this.state.addition\n    }).then(result => {\n      alert(\"Автор создан!\");\n    }).catch(() => {\n      alert(\"Ошибка! Проверь форму!\");\n    });\n  }\n\n  handleSubmit(e) {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n\n    if (params && params.pk) {\n      this.handleUpdate(params.pk);\n    } else {\n      this.handleCreate(params);\n    }\n\n    e.preventDefault();\n  }\n\n  handleChange(e) {\n    this.setState({\n      [e.target.id]: e.target.value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.handleChange,\n      id: \"lname\",\n      className: \"form-control\",\n      type: \"text\",\n      value: this.state.lname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, \"\\u0418\\u043C\\u044F\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"fname\",\n      type: \"text\",\n      value: this.state.fname,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, \"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u0438\\u0439 \\u0437\\u043D\\u0430\\u043A\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"author_code\",\n      type: \"text\",\n      value: this.state.author_code,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, \"\\u0421\\u043F\\u0440\\u0430\\u0432\\u043E\\u0447\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control\",\n      id: \"addition\",\n      rows: \"7\",\n      type: \"text\",\n      value: this.state.addition,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      value: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }))), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"http://lib.sportedu.ru/HAVkina1.idc\",\n      style: {\n        color: 'black'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, \"\\u0422\\u0430\\u0431\\u043B\\u0438\\u0446\\u044B \\u0430\\u0432\\u0442\\u043E\\u0440\\u0441\\u043A\\u0438\\u0445 \\u0437\\u043D\\u0430\\u043A\\u043E\\u0432\"));\n  }\n\n}\n\nexport default AuthorCreateUpdate;","map":{"version":3,"sources":["/home/mutovkin/docker_homework/frontend/src/AuthorCreateUpdate.js"],"names":["React","Component","AuthorManager","authorManager","AuthorCreateUpdate","constructor","props","state","id","fname","lname","author_code","addition","handleSubmit","bind","handleChange","componentDidMount","match","params","pk","getAuthor","then","a","setState","handleUpdate","updateAuthor","result","alert","catch","handleCreate","createAuthor","e","preventDefault","target","value","render","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport AuthorManager from './AuthorApi';\n\nconst authorManager = new AuthorManager();\n\nclass AuthorCreateUpdate extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        id:null,\n        fname:'',\n        lname:'',\n        author_code:'',\n        addition: '',\n      }\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount(){\n    const {match: {params}} = this.props;\n    if(params && params.pk) {\n      authorManager.getAuthor(params.pk).then((a)=>{\n        this.setState({\n          fname:a.fname,\n          lname:a.lname,\n          author_code: a.author_code,\n          addition: a.addition,\n        })\n      })\n    }\n  }\n\n  handleUpdate(pk){\n    authorManager.updateAuthor({\n      \"pk\": pk,\n      \"fname\": this.state.fname,\n      \"lname\": this.state.lname,\n      \"author_code\": this.state.author_code,\n      \"addition\": this.state.addition,\n    }).then((result)=>{\n        alert(\"Автор отредактирован!\");\n      }).catch(()=>{\n        alert(\"Ошибка! Проверь форму!\");\n      });\n  }\n\n  handleCreate(){\n    authorManager.createAuthor({\n      \"fname\": this.state.fname,\n      \"lname\": this.state.lname,\n      \"author_code\": this.state.author_code,\n      \"addition\": this.state.addition,\n    }).then((result)=>{\n        alert(\"Автор создан!\");\n      }).catch(()=>{\n        alert(\"Ошибка! Проверь форму!\");\n      });\n  }\n\n  handleSubmit(e){\n    const { match: { params } } = this.props;\n    if (params && params.pk){\n      this.handleUpdate(params.pk);\n    }\n    else {\n      this.handleCreate(params);\n    }\n    e.preventDefault();\n  }\n\n  handleChange(e){\n    this.setState({\n        [e.target.id]:e.target.value\n      })\n  }\n\n\n\n  render() {\n    return (\n      <div className=\"container\">\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"form-group\">\n          <label>Фамилия</label>\n          <input onChange={this.handleChange} id=\"lname\" className=\"form-control\" type=\"text\" value={this.state.lname}/>\n\n          <label>Имя</label>\n          <input className=\"form-control\" id=\"fname\" type=\"text\" value={this.state.fname} onChange={this.handleChange}/>\n\n          <label>Авторский знак</label>\n          <input className=\"form-control\" id=\"author_code\" type=\"text\" value={this.state.author_code} onChange={this.handleChange}/>\n\n          <label>Справочная информация</label>\n          <textarea className=\"form-control\" id=\"addition\" rows=\"7\" type=\"text\" value={this.state.addition} onChange={this.handleChange}/>\n\n          <input className=\"btn btn-primary\" type=\"submit\" value=\"Сохранить\"/>\n\n\n        </div>\n      </form>\n      <a href=\"http://lib.sportedu.ru/HAVkina1.idc\" style={{color: 'black'}}>Таблицы авторских знаков</a>\n      </div>\n    );\n  }\n\n}\nexport default AuthorCreateUpdate;\n"]},"metadata":{},"sourceType":"module"}